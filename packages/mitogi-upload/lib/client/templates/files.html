<template name="files">
  <div class="files">
      {{> Template.dynamic template=templateName data=files}}
  </div>
</template>

<template name="file-photo">
    <div class="row">
        <div id="spotlight-gallery">
            {{#each this}}
                <div class="col-md-3">
                 <!-- START panel-->
                         <div class="panel panel-default bounceIn" id="panel-{{index}}">
                            <div class="panel-heading">{{name}}
                               
                                <a href="#" class="pull-right ">
                                  <em class="fa fa-times delete-file" data-id="{{_id}}"></em>
                               </a>
                 
                            </div>
                            <div class="panel-body">
                               <a href="{{filepath}}" title="{{name}}" data-gallery><img src="{{this.filepath}}" height="auto" width="100%"></a><br/>
                                {{numberWithCommas size }} KB
                            </div>
                         </div>
                </div>
            {{/each}}
             <!-- END panel-->
        </div>
    </div>
    {{> SpotlightGalleryModal}}
</template>

<template name="file-video">

    <div class="row">
      {{#each this}}
      <div class="panel panel-default col-md-6">
            <div class="panel-heading">

                <a href="#" class="pull-right ">             
                  <em class="fa fa-times delete-file" data-id="{{_id}}"></em>
               </a>
               <div class="row">
                  <input class="col-md-8" type="text" placeholder={{name}} name="filename" data-id="{{_id}}"/>
                  <input class="col-md-2" type="number" name="order" data-id="{{_id}}" placeholder={{order}}>
                  <button class="submit-metadata">Submit</button>
                </div>
               {{> video_player video=this width="100%" height="100%"}}
            
            </div>

            <div class="panel-body">             
              
            </div>
      </div>
      {{/each}}
     
    </div>
</template>

<template name="video_player">
  {{#if ready}}
    {{name}}
    {{#if $not video.key}}
      <iframe width="100%" height="auto" src="{{getPlayer video.filepath}}" frameborder="0" allowfullscreen></iframe>
    {{else}}
    <video class="video-player" width={{width}} height={{height}} controls>
      <!--need to encode videos-->
        <source src="{{newExtension video.filepath 'webm'}}" type="video/webm">
        <source src="{{newExtension video.filepath 'mp4'}}" type="video/mp4">

       Your browser does not support the video tag.
    </video>
    {{/if}}
    <a class="pull-right btn btn-info" href="{{newExtension video.filepath 'mp4'}}" download>Download</a>
  {{else}}
    {{> loading}}
   <p class="text-center"> Video is processing and should be up shortly.</p>
  {{/if}}

</template>


<template name="file-attachment">
    <div class="row">
            {{#each this}}
                <div class="col-md-3">
                 <!-- START panel-->
                         <div class="panel panel-default bounceIn" id="panel-{{index}}">
                            <div class="panel-heading">

                              {{#if $or (isActiveRoute 'postEdit') (isActiveRoute 'postSubmit')}}
                                <a href="#" class="pull-right ">
                                  <em class="fa fa-times delete-file" data-id="{{_id}}"></em>
                               </a>
                               {{/if}}
                            </div>
                            <div class="panel-body text-center">
                                <a href="{{filepath}}" download>
                                    <i class="fa fa-4x {{getIcon filepath}}"></i>
                                    <br>
                                    {{name}}
                                </a>
                                <br/>
                                {{numberWithCommas size }} KB
                            </div>
                         </div>
                </div>
            {{/each}}
             <!-- END panel-->
    </div>
</template>